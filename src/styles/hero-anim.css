/* Scope to the hero so nothing else gets touched */
.hero-visual svg {
  width: 100%;
  height: auto;
  display: block;
  transform-box: fill-box;
}

/* Stroke-draw for lines/paths inside the main group */
.hero-visual #pencil_icon path,
.hero-visual #pencil_icon line,
.hero-visual #pencil_icon polyline {
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-dasharray: var(--len, 1000);
  stroke-dashoffset: var(--len, 1000);
  animation: hero-draw 1.4s ease-out;
  animation-fill-mode: none;
}

/* Gentler pencil */
.hero-visual #pencil_icon {
  transform-origin: 60% 90%;
  animation:
    pencil-float 7s ease-in-out infinite,
    pencil-swing 3.6s ease-in-out .2s infinite;
}
@keyframes pencil-float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
@keyframes pencil-swing  { 0%,100%{rotate:0} 30%{rotate:-3deg} 70%{rotate:2deg} }

/* Parallax on code & mug */
.hero-visual #code_icon { animation: float-s 7.4s ease-in-out .3s infinite; }
.hero-visual #mug       { animation: float-s 6.8s ease-in-out .6s infinite; }
@keyframes float-s { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-3px)} }

/* Subtle ground shadow (add <ellipse id="shadow" ...> to SVG) */
.hero-visual #shadow {
  opacity:.18;
  transform-origin:center;
  animation: shadow-breathe 7s ease-in-out infinite;
}
@keyframes shadow-breathe { 0%,100%{transform:scaleX(1)} 50%{transform:scaleX(.92)} }



/* --- EYE BLINK (opacity only, both Ilian and Gregory eyes blink together) --- */
.hero-visual #lefteyeilian,
.hero-visual #righteyeilian,
.hero-visual #lefteye_greg,
.hero-visual #righteye_greg {
  animation: hero-blink 6s ease-in-out 2s infinite !important;
  transform-origin: center;
}
@keyframes hero-blink {
  0%, 96%, 100% { opacity: 1; }
  97%, 98%     { opacity: 0; }
}

/* Synced blink (add class="eye" to all four eye paths in your SVG) */
.hero-visual .eye { transform-origin: center; }
.hero-visual.blink-now #lefteyeilian,
.hero-visual.blink-now #righteyeilian,
.hero-visual.blink-now #lefteye_greg,
.hero-visual.blink-now #righteye_greg {
  animation: wink 140ms ease-in-out forwards;
}
@keyframes wink { to { transform: scaleY(0.06); } }



/* --- STEAM DRAW ANIMATION (draws once, not looping) --- */
.hero-visual #steam_short_line,
.hero-visual #steam_long_line {
  stroke-dasharray: 120;
  stroke-dashoffset: 120;
  opacity: 0;
  filter: blur(.2px);
  animation: steam-rise 3.8s ease-in-out infinite;
}
.hero-visual #steam_short_line { animation-delay: .2s; }
.hero-visual #steam_long_line  { animation-delay: .9s; }

@keyframes steam-rise {
  0%   { stroke-dashoffset:120; opacity:0; transform:translate(0,8px); }
  20%  { opacity:.6; }
  50%  { stroke-dashoffset:0;   opacity:.9; transform:translate(2px,-8px); }
  85%  { opacity:.3; transform:translate(-1px,-18px); }
  100% { stroke-dashoffset:120; opacity:0; transform:translate(0,-22px); }
}

/* Typing fingers (Ilian) */
.hero-visual #fingersilian path {
  transform-box: fill-box;
  transform-origin: bottom center;
  animation: finger-type 1.1s cubic-bezier(.7,0,.3,1) infinite;
}
.hero-visual #fingersilian #LOWERFINGER { animation-delay: 0.0s; }
.hero-visual #fingersilian #MIDDLEFINGER { animation-delay: 0.18s; }
.hero-visual #fingersilian #UPPERFINGER { animation-delay: 0.34s; }

@keyframes finger-type {
  0%, 80%, 100% { transform: rotate(0deg); }
  30% { transform: rotate(7deg); }
  40% { transform: rotate(-3deg); }
}

/* Typing fingers (Gregory) */
.hero-visual #fingersgreg path {
  transform-box: fill-box;
  transform-origin: bottom center;
  animation: finger-type-greg 1.1s cubic-bezier(.7,0,.3,1) infinite;
}
.hero-visual #fingersgreg #LOWERFINGER-2 { animation-delay: 0.0s; }
.hero-visual #fingersgreg #MIDDLEFINGER-2 { animation-delay: 0.18s; }
.hero-visual #fingersgreg #UPPERFINGER-2 { animation-delay: 0.34s; }

@keyframes finger-type-greg {
  0%, 80%, 100% { transform: rotate(0deg); }
  30% { transform: rotate(7deg); }
  40% { transform: rotate(-3deg); }
}

/* Hover lift */
.hero-visual svg:hover #pencil_icon {
  transform: translateY(-4px);
}
.hero-visual:hover #mug   { transform: translateY(-4px); transition: transform .2s ease; }
.hero-visual.smile-now #mouthilian { transform: translateY(-2px); transition: transform .25s ease; }
.hero-visual.boing #pencil_icon { animation: boing .32s cubic-bezier(.2,1.6,.3,1) 1; }
@keyframes boing { 0%{scale:1} 50%{scale:1.05} 100%{scale:1} }

/* Motion safety */
@media (prefers-reduced-motion: reduce) {
  .hero-visual #pencil_icon,
  .hero-visual #pencil_icon * {
    animation: none !important;
    transform: none !important;
  }
}

.hero-visual #pencil_icon,
.hero-visual #code_icon,
.hero-visual #mug,
.hero-visual #steam_short_line,
.hero-visual #steam_long_line { will-change: transform, opacity; }
