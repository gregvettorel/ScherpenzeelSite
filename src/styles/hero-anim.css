/* Scope to the hero so nothing else gets touched */
.hero-visual {
  overflow: visible !important;
}
.hero-visual svg {
  overflow: visible !important;
  width: 100%;
  height: auto;
  display: block;
  transform-box: fill-box;
}

/* Stroke-draw for lines/paths inside the main group */
.hero-visual #pencil_icon path,
.hero-visual #pencil_icon line,
.hero-visual #pencil_icon polyline {
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-dasharray: var(--len, 1000);
  stroke-dashoffset: var(--len, 1000);
  animation: hero-draw 1.4s ease-out;
  animation-fill-mode: none;
}

/* Pencil animation (smooth float only) */
.hero-visual #pencil_icon {
  animation: smooth-float-up 6.2s cubic-bezier(.22,.61,.36,1) infinite;
  transform-origin: 60% 90%;
  will-change: transform, opacity;
}

/* Parallax on code & mug */
.hero-visual #code_icon,
.hero-visual #code_icon2,
.hero-visual #code_icon3 {
  animation: smooth-float-up 5.8s cubic-bezier(.22,.61,.36,1) infinite;
  transform-origin: 50% 100%;
  will-change: transform, opacity;
}
.hero-visual #code_icon2 { animation-delay: 1.9s; }
.hero-visual #code_icon3 { animation-delay: 3.8s; }
.hero-visual #mug { animation: float-s 6.8s ease-in-out .6s infinite; }
@keyframes float-s { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-3px)} }

/* Subtle ground shadow (add <ellipse id="shadow" ...> to SVG) */
.hero-visual #shadow {
  opacity:.18;
  transform-origin:center;
  animation: shadow-breathe 7s ease-in-out infinite;
}
@keyframes shadow-breathe { 0%,100%{transform:scaleX(1)} 50%{transform:scaleX(.92)} }



/* --- EYE BLINK (opacity only, both Ilian and Gregory eyes blink together) --- */
.hero-visual #lefteyeilian,
.hero-visual #righteyeilian,
.hero-visual #lefteye_greg,
.hero-visual #righteye_greg {
  animation: hero-blink 6s ease-in-out 2s infinite !important;
  transform-origin: center;
}
@keyframes hero-blink {
  0%, 96%, 100% { opacity: 1; }
  97%, 98%     { opacity: 0; }
}

/* Synced blink (add class="eye" to all four eye paths in your SVG) */
.hero-visual .eye { transform-origin: center; }
.hero-visual.blink-now #lefteyeilian,
.hero-visual.blink-now #righteyeilian,
.hero-visual.blink-now #lefteye_greg,
.hero-visual.blink-now #righteye_greg {
  animation: wink 140ms ease-in-out forwards;
}
@keyframes wink { to { transform: scaleY(0.06); } }



/* --- STEAM --- */
.hero-visual #steam_short_line,
.hero-visual #long_line {
  stroke-dasharray: 120;
  stroke-dashoffset: 120;
  opacity: 0;
  filter: blur(.2px);
  animation: steam-rise 3.8s ease-in-out infinite;
  will-change: transform, opacity;
}
.hero-visual #steam_short_line { animation-delay: .2s; }
.hero-visual #long_line  { animation-delay: .9s; }

@keyframes steam-rise {
  0%   { stroke-dashoffset:120; opacity:0; transform:translate(0,8px); }
  20%  { opacity:.6; }
  50%  { stroke-dashoffset:0;   opacity:.9; transform:translate(2px,-8px); }
  85%  { opacity:.3; transform:translate(-1px,-18px); }
  100% { stroke-dashoffset:120; opacity:0; transform:translate(0,-22px); }
}

/* --- FINGERS --- */
@keyframes finger-type-natural {
  0%, 80%, 100% { transform: rotate(0deg); }
  30% { transform: rotate(var(--press-depth, 6deg)); }
  40% { transform: rotate(calc(var(--press-depth, 6deg) * -0.35)); }
}
.hero-visual #fingersilian path,
.hero-visual #fingersgreg path {
  transform-box: fill-box;
  transform-origin: bottom center;
  animation: finger-type-natural var(--press-speed,1.08s) cubic-bezier(.7,0,.3,1) infinite;
  animation-delay: var(--press-delay,0s);
}
.hero-visual #fingersilian #LOWERFINGER    { --press-delay: 0.00s; }
.hero-visual #fingersilian #MIDDLEFINGER   { --press-delay: 0.18s; }
.hero-visual #fingersilian #UPPERFINGER    { --press-delay: 0.34s; }
.hero-visual #fingersgreg  #LOWERFINGER-2  { --press-delay: 0.00s; }
.hero-visual #fingersgreg  #MIDDLEFINGER-2 { --press-delay: 0.18s; }
.hero-visual #fingersgreg  #UPPERFINGER-2  { --press-delay: 0.34s; }

/* Typing burst (optional: laptop nudge, steam, code icon speed-up) */
@keyframes laptop-nudge {
  0%, 100% { transform: translateY(0) rotate(0); }
  50%      { transform: translateY(1.4px) rotate(-0.6deg); }
}
.hero-visual.typing-burst #code_icon {
  animation: laptop-nudge 320ms ease-in-out 2;
}
.hero-visual.typing-burst #steam_short_line,
.hero-visual.typing-burst #long_line {
  animation-duration: 3.2s !important;
}
.hero-visual.typing-burst #code_icon,
.hero-visual.typing-burst #code_icon2,
.hero-visual.typing-burst #code_icon3 {
  animation-duration: 4.9s;
}

/* Shared smooth float keyframe */
@keyframes smooth-float-up {
  0% {
    transform: translateY(0) scale(0.96);
    opacity: 0;
  }
  15% {
    opacity: 1;
  }
  70% {
    transform: translateY(-80px) scale(1);
    opacity: 1;
  }
  100% {
    transform: translateY(-110px) scale(1.02);
    opacity: 0;
  }
}

/* Motion safety */
@media (prefers-reduced-motion: reduce) {
  .hero-visual * {
    animation: none !important;
    transition: none !important;
    transform: none !important;
  }
}
