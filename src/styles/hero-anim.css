/* Scope to the hero so nothing else gets touched */
.hero-visual {
  overflow: visible !important;
}
.hero-visual svg {
  overflow: visible !important;
  width: 100%;
  height: auto;
  display: block;
  transform-box: fill-box;
}

/* Stroke-draw for lines/paths inside the main group */
.hero-visual #pencil_icon path,
.hero-visual #pencil_icon line,
.hero-visual #pencil_icon polyline {
  stroke-linecap: round;
  stroke-linejoin: round;
  stroke-dasharray: var(--len, 1000);
  stroke-dashoffset: var(--len, 1000);
  animation: hero-draw 1.4s ease-out;
  animation-fill-mode: none;
}

/* Gentler pencil */
.hero-visual #pencil_icon {
  animation:
    pencil-message 4.2s cubic-bezier(.77,0,.18,1) infinite,
    pencil-swing 3.6s ease-in-out .2s infinite;
  transform-origin: 60% 90%;
}
@keyframes pencil-float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
@keyframes pencil-swing  { 0%,100%{rotate:0} 30%{rotate:-3deg} 70%{rotate:2deg} }
@keyframes pencil-message {
  0% {
    opacity: 0;
    transform: translateY(0) scale(0.7) rotate(-10deg);
  }
  10% {
    opacity: 1;
    transform: translateY(-12px) scale(1.05) rotate(-2deg);
  }
  20% {
    opacity: 1;
    transform: translateY(-24px) scale(1.08) rotate(0deg);
  }
  60% {
    opacity: 1;
    transform: translateY(-70px) scale(1.08) rotate(6deg);
  }
  80% {
    opacity: 0.7;
    transform: translateY(-90px) scale(1.02) rotate(-8deg);
  }
  100% {
    opacity: 0;
    transform: translateY(0) scale(0.7) rotate(-10deg);
  }
}

/* Parallax on code & mug */
.hero-visual #code_icon { animation: float-s 7.4s ease-in-out .3s infinite; }
.hero-visual #mug       { animation: float-s 6.8s ease-in-out .6s infinite; }
@keyframes float-s { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-3px)} }

/* Subtle ground shadow (add <ellipse id="shadow" ...> to SVG) */
.hero-visual #shadow {
  opacity:.18;
  transform-origin:center;
  animation: shadow-breathe 7s ease-in-out infinite;
}
@keyframes shadow-breathe { 0%,100%{transform:scaleX(1)} 50%{transform:scaleX(.92)} }



/* --- EYE BLINK (opacity only, both Ilian and Gregory eyes blink together) --- */
.hero-visual #lefteyeilian,
.hero-visual #righteyeilian,
.hero-visual #lefteye_greg,
.hero-visual #righteye_greg {
  animation: hero-blink 6s ease-in-out 2s infinite !important;
  transform-origin: center;
}
@keyframes hero-blink {
  0%, 96%, 100% { opacity: 1; }
  97%, 98%     { opacity: 0; }
}

/* Synced blink (add class="eye" to all four eye paths in your SVG) */
.hero-visual .eye { transform-origin: center; }
.hero-visual.blink-now #lefteyeilian,
.hero-visual.blink-now #righteyeilian,
.hero-visual.blink-now #lefteye_greg,
.hero-visual.blink-now #righteye_greg {
  animation: wink 140ms ease-in-out forwards;
}
@keyframes wink { to { transform: scaleY(0.06); } }



/* --- STEAM DRAW ANIMATION (draws once, not looping) --- */
.hero-visual #steam_short_line,
.hero-visual #long_line {
  stroke-dasharray: 120;
  stroke-dashoffset: 120;
  opacity: 0;
  filter: blur(.2px);
  animation: steam-rise 3.8s ease-in-out infinite;
}
.hero-visual #steam_short_line { animation-delay: .2s; }
.hero-visual #long_line  { animation-delay: .9s; }

@keyframes steam-rise {
  0%   { stroke-dashoffset:120; opacity:0; transform:translate(0,8px); }
  20%  { opacity:.6; }
  50%  { stroke-dashoffset:0;   opacity:.9; transform:translate(2px,-8px); }
  85%  { opacity:.3; transform:translate(-1px,-18px); }
  100% { stroke-dashoffset:120; opacity:0; transform:translate(0,-22px); }
}

/* Typing fingers (Ilian) */
.hero-visual #fingersilian path {
  transform-box: fill-box;
  transform-origin: bottom center;
  animation: finger-type 1.1s cubic-bezier(.7,0,.3,1) infinite;
}
.hero-visual #fingersilian #LOWERFINGER { animation-delay: 0.0s; }
.hero-visual #fingersilian #MIDDLEFINGER { animation-delay: 0.18s; }
.hero-visual #fingersilian #UPPERFINGER { animation-delay: 0.34s; }

@keyframes finger-type {
  0%, 80%, 100% { transform: rotate(0deg); }
  30% { transform: rotate(7deg); }
  40% { transform: rotate(-3deg); }
}

/* Typing fingers (Gregory) */
.hero-visual #fingersgreg path {
  transform-box: fill-box;
  transform-origin: bottom center;
  animation: finger-type-greg 1.1s cubic-bezier(.7,0,.3,1) infinite;
}
.hero-visual #fingersgreg #LOWERFINGER-2 { animation-delay: 0.0s; }
.hero-visual #fingersgreg #MIDDLEFINGER-2 { animation-delay: 0.18s; }
.hero-visual #fingersgreg #UPPERFINGER-2 { animation-delay: 0.34s; }

@keyframes finger-type-greg {
  0%, 80%, 100% { transform: rotate(0deg); }
  30% { transform: rotate(7deg); }
  40% { transform: rotate(-3deg); }
}

/* Hover lift */
.hero-visual svg:hover #pencil_icon {
  transform: translateY(-4px);
}
.hero-visual:hover #mug   { transform: translateY(-4px); transition: transform .2s ease; }
.hero-visual.smile-now #mouthilian { transform: translateY(-2px); transition: transform .25s ease; }
.hero-visual.boing #pencil_icon { animation: boing .32s cubic-bezier(.2,1.6,.3,1) 1; }
@keyframes boing { 0%{scale:1} 50%{scale:1.05} 100%{scale:1} }

/* Dev icon flies out and respawns from the PC */
.hero-visual #code_icon {
  animation: code-bubble 5.5s cubic-bezier(.77,0,.18,1) infinite;
  transform-origin: 50% 100%;
  opacity: 0.7;
  filter: drop-shadow(0 4px 16px rgba(0,0,0,0.08));
}

@keyframes code-bubble {
  0% {
    opacity: 0;
    transform: translate(0, 0) scale(0.7);
  }
  10% {
    opacity: 0.7;
    transform: translate(0, 0) scale(1);
  }
  80% {
    opacity: 0.7;
    transform: translate(10px, -80px) scale(1.08);
  }
  92% {
    opacity: 0;
    transform: translate(16px, -120px) scale(1.12);
  }
  100% {
    opacity: 0;
    transform: translate(0, 0) scale(0.7);
  }
}

/* Optional: stagger for multiple icons (if you duplicate #code_icon in SVG) */
.hero-visual #code_icon2 { animation-delay: 2.2s; }
.hero-visual #code_icon3 { animation-delay: 4.4s; }

/* For the pencil, if you want the same effect: */
.hero-visual #pencil_icon {
  animation:
    pencil-bubble 6.2s cubic-bezier(.77,0,.18,1) infinite,
    pencil-swing 3.6s ease-in-out .2s infinite;
  transform-origin: 60% 90%;
  opacity: 0.7;
}

@keyframes pencil-bubble {
  0% {
    opacity: 0;
    transform: translateY(0) scale(0.7) rotate(-10deg);
  }
  10% {
    opacity: 0.7;
    transform: translateY(0) scale(1) rotate(-2deg);
  }
  80% {
    opacity: 0.7;
    transform: translateY(-80px) scale(1.08) rotate(2deg);
  }
  92% {
    opacity: 0;
    transform: translateY(-120px) scale(1.12) rotate(0deg);
  }
  100% {
    opacity: 0;
    transform: translateY(0) scale(0.7) rotate(-10deg);
  }
}

/* Motion safety */
@media (prefers-reduced-motion: reduce) {
  .hero-visual #pencil_icon,
  .hero-visual #pencil_icon * {
    animation: none !important;
    transform: none !important;
  }
}

.hero-visual #pencil_icon,
.hero-visual #code_icon,
.hero-visual #mug,
.hero-visual #steam_short_line,
.hero-visual #long_line { will-change: transform, opacity; }

.hero-visual #code_icon2 { animation-delay: 1.2s; }
.hero-visual #code_icon3 { animation-delay: 2.4s; }
